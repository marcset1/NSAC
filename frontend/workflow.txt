┌─────────────────────────────────────────────────────────────────┐
│                         UTILISATEUR                              │
└───────────────────────────┬─────────────────────────────────────┘
                            │
							▼
┌─────────────────────────────────────────────────────────────────┐
│                      FRONTEND (Browser)                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │  index.html  │→ │  quiz.html   │→ │  game.html   │→Results │
│  │  (Accueil)   │  │  (5 quiz)    │  │  (Gameplay)  │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│         │                  │                  │                  │
│         ▼                  		 ▼                  		▼                  │
│    landing.js         quiz.js            game.js                │
│                           │                  │                  │
│                           └──────┬───────────┘                  │
│                                  │                               │
│                                  ▼                               │
│                          localStorage                            │
│                      (quiz score, saves)                         │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            │ HTTP Requests (fetch)
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                      BACKEND API (Flask/Node)                    │
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │                      app.py / server.js                   │  │
│  │                                                            │  │
│  │  Endpoints:                                                │  │
│  │  ├─ GET  /api/quiz/questions      → Questions quiz        │  │
│  │  ├─ GET  /api/game/data           → Données 90 jours      │  │
│  │  ├─ GET  /api/game/day/:id        → Données jour X        │  │
│  │  ├─ POST /api/game/predict        → Prédiction ML         │  │
│  │  └─ POST /api/game/action         → Valider action        │  │
│  └──────────────────────────────────────────────────────────┘  │
│                            │                                     │
│                            ▼                                     │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │            ML Models (Python)                             │  │
│  │  ├─ yield_predictor_v1.pkl  (Rendement)                  │  │
│  │  ├─ stress_model.pkl        (Stress hydrique)            │  │
│  │  └─ recommendation.py       (Recommandations)            │  │
│  └──────────────────────────────────────────────────────────┘  │
│                            │                                     │
│                            ▼                                     │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │            Data Layer                                     │  │
│  │  /data/                                                    │  │
│  │    ├─ raw/                                                │  │
│  │    │   ├─ smap_iowa.csv    (Humidité sol)                │  │
│  │    │   ├─ gpm_iowa.csv     (Précipitations)              │  │
│  │    │   └─ modis_iowa.csv   (NDVI)                        │  │
│  │    └─ processed/                                          │  │
│  │        └─ game_data.json   (Unifié pour jeu)             │  │
│  └──────────────────────────────────────────────────────────┘  │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                    NASA APIs (External)                          │
│  ├─ AppEEARS    (SMAP + MODIS extraction)                       │
│  ├─ Giovanni    (GPM precipitation)                             │
│  └─ Earthdata   (Authentication + downloads)                    │
└─────────────────────────────────────────────────────────────────┘


📊 Diagramme de Flux Complet

START
  │
  ▼
[index.html] Accueil
  │
  ├─→ Clic "Commencer"
  │
  ▼
[quiz.html] 5 Questions NASA
  │
  ├─→ fetch('/api/quiz/questions') ─────────┐
  │                                          │
  ├─→ Joueur répond                          │
  │                                          ▼
  ├─→ Calcul score + bonus                [Backend API]
  │                                       /api/quiz/questions
  ├─→ localStorage.setItem('quizBonus')    │
  │                                          │
  ▼                                          │
[game.html] Gameplay Principal               │
  │                                          │
  ├─→ initGame()                             │
  │    │                                     │
  │    ├─→ try {                             │
  │    │     fetch('/api/game/data') ────────┤
  │    │     ✅ Success                      │
  │    │     gameState.nasaData = API data   ▼
  │    │   }                            [Data Layer]
  │    │                                 game_data.json
  │    ├─→ catch {                           │
  │    │     ❌ Error                         │
  │    │     loadDemoMode()                  │
  │    │     gameState.nasaData = Generated  │
  │    │   }                                 │
  │    │                                     │
  │    └─→ loadDayData(1)                    │
  │         updateUI()                       │
  │                                          │
  ├─→ BOUCLE DE JEU ◄─────────────────────┐ │
  │    │                                   │ │
  │    ├─→ Joueur consulte NASA Data      │ │
  │    │    - Clic onglet SMAP            │ │
  │    │    - Clic onglet GPM             │ │
  │    │    - Clic onglet MODIS           │ │
  │    │    - stats.smapViews++           │ │
  │    │                                  │ │
  │    ├─→ Joueur prend décision          │ │
  │    │    - showActionModal('irrigate') │ │
  │    │    - performIrrigation()         │ │
  │    │    - gameState.water -= 100      │ │
  │    │    - gameState.plot.soil += 15   │ │
  │    │                                  │ │
  │    ├─→ Joueur avance temps            │ │
  │    │    - nextDay()                   │ │
  │    │    - simulateDayEffects()        │ │
  │    │    - currentDay++                │ │
  │    │    - loadDayData(currentDay)     │ │
  │    │                                  │ │
  │    └─→ if (currentDay < 90) ──────────┘ │
  │        else endGame()                    │
  │                                          │
  ▼                                          │
[results.html] Écran Résultats               │
  │                                          │
  ├─→ calculateFinalResults()                │
  │    - Rendement = f(health, NDVI)        │
  │    - Étoiles = f(yield, water)          │
  │    - Comparaison avec/sans NASA         │
  │                                          │
  ├─→ Affichage graphiques                   │
  │    - Barres rendement                    │
  │    - Stats usage NASA                    │
  │    - Badges obtenus                      │
  │                                          │
  └─→ Boutons:                               │
       - Rejouer (→ game.html)               │
       - Partager résultats                  │
                                             │
                                             ▼
                                          [END]
